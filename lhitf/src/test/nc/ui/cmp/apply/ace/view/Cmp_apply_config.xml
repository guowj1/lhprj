<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 环境变量 -->
    <bean id="context" class="nc.vo.uif2.LoginContext" />
        <!--打印处理类，精度等 -->
	<bean id="printProcessor" class="nc.ui.tmpub.digit.print.DefaultPrintProcessor">
		<property name="srcDestItemCollection" ref="cardSrcDestCollection" />
		<property name="mutiBodyStructure" value="false"/>
		<property name="tabMap">
			<map>
				<entry key="applyBVO" value="nc.vo.cmp.apply.ApplyBVO"></entry>
			</map>
		</property>
	</bean>
    <import resource="apply_precision.xml" />
	<import resource="card_print.xml" />
	<import resource="list_print.xml" />

    <!-- 模型部分配置 -->
    
    <!-- 单据操作代理 --> 
	<bean id="maintainProxy" class="nc.ui.cmp.apply.ace.serviceproxy.AceCmp_applyMaintainProxy" />
	<!-- 对象转换器工厂，由此获取操作对象的特征信息 -->
	<bean id="boadatorfactory"
		class="nc.ui.pubapp.uif2app.view.value.AggVOMetaBDObjectAdapterFactory" />

	<!-- 管理应用模型 -->
	<bean id="manageAppModel" class="nc.ui.pubapp.uif2app.model.BillManageModel">
		<property name="businessObjectAdapterFactory" ref="boadatorfactory"></property>
		<property name="context" ref="context"></property>
	</bean>
	
	<bean id="modelDataManager" class="nc.ui.pubapp.uif2app.model.pagination.PaginationModelDataManager">
		<property name="model" ref="manageAppModel"></property>
		<property name="paginationModel" ref="paginationModel" />
		<property name="pageQueryService" ref="pageQueryService" />
	</bean>
	
	<bean id="paginationModel" class="nc.ui.pubapp.uif2app.model.pagination.PubPaginationModel"
		init-method="init">
		<property name="paginationQueryService" ref="maintainProxy" />
	</bean>
	
	<bean id="pageQueryService" class="nc.ui.pubapp.uif2app.model.pagination.UIPageQueryService">
		<property name="allPagePkQueryServiceMethod" value="nc.itf.cmp.IApplyService.queryPKs"></property>
		<property name="dataOfPksQueryServiceMethod" value="nc.itf.cmp.IApplyService.queryBillByPK"></property>
	</bean>
	<bean id="paginationBar" class="nc.ui.uif2.components.pagination.PaginationBar"  init-method="registeCallbak">
		<property name="paginationModel" ref="paginationModel" />
		<property name="context" ref="context" />
	</bean>
		
<!-- 模板容器，负责对模板的统一装载 -->
    <bean id="templateContainer" class="nc.ui.cmp.apply.view.CMPApplyTemplateContainer">
        <property name="context" ref="context" />
        <property name="nodeKeies">
        	<list>
        		<value>36D1</value>
        	</list>
        </property>

    </bean>
    
 <!-- 查询模板加载bean -->
	<bean id="queryTemplateContainer" class="nc.ui.uif2.editor.QueryTemplateContainer">
		<property name="context" ref="context"></property>
		<property name="nodeKey" value="qt"></property>   
	</bean>
    
    <!-- 界面元素 -->
    <!-- 列表视图 -->
    <bean id="listView" class="nc.ui.pubapp.uif2app.view.ShowUpableBillListView"
        init-method="initUI">
        <!-- 用于加载默认模板 -->
        <property name="nodekey" value="36D1" />
        <property name="paginationBar" ref="paginationBar" />
        <property name="model" ref="manageAppModel"></property>
		        <property name="templateContainer" ref="templateContainer"></property>
		          <!-- 是否合计 -->
        <property name="showTotalLine" value="true"/> 
        <property name="showTotalLineTabcodes">
			<list>
				<value>pk_apply_b</value>
			</list>
		</property>
        <!-- 列表自定义项处理 -->
		<property name="userdefitemListPreparator">
			<bean class="nc.ui.pubapp.uif2app.view.CompositeBillListDataPrepare">
				<property name="billListDataPrepares">
					<list>
						<ref bean="userdefitemlistPreparator" />
						<ref bean="marAsstPreparator" />
					</list>
				</property>
			</bean>
		</property>
    </bean>
    
     <!-- 列表自定义项处理 -->
	<bean name="userdefitemlistPreparator" class="nc.ui.uif2.editor.UserdefitemContainerListPreparator">
		<property name="container" ref="userdefitemContainer" />
		<property name="params">				
			<list>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="cmp.cmp_apply" />
					<property name="pos" value="0" />
					<property name="prefix" value="vdef" />
				</bean>	
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="cmp.cmp_apply_b" />
					<property name="pos" value="1" />
					<property name="prefix" value="vdef" />
				</bean>	
							</list>
		</property>
	</bean>
	

	<bean id="orgPanel" class="nc.ui.pubapp.uif2app.view.BillOrgPanel"  init-method="initUI">
  <property name="model" ref="manageAppModel" />
  <!--<property name="labelName" value="付款申请组织" /> -->
  <property name="labelName">
			<bean class="nc.ui.uif2.I18nFB ">
				<property name="resDir" value="3607apply_add_0" />
				<property name="defaultValue" value="pk_org" />
				<property name="resId" value="03607apply_add-0165" />
			</bean>
		</property>
 </bean>
	<!--卡控件 -->
    <bean id="billFormEditor" class="nc.ui.cmp.apply.view.ApplyCardView" init-method="initUI">
        <property name="model" ref="manageAppModel"></property>
        <property name="templateContainer" ref="templateContainer" />
 		<property name="billOrgPanel" ref="orgPanel"/>
 		<!-- 用于加载默认模板 -->
 		<property name="nodekey" value="36D1" />
 		<!-- wangchla  new  -->
 		<property name="defValueItf" ref="billDefVauleItf" />
 		<property name="showOrgPanel" value="true" />
  <!--			<property name="userdefitemPreparator" ref="userdefitemCardPreparator" />
-->			<property name="closingListener">
			<ref bean="ClosingListener" />
		</property>
 	  	<property name="defaultRefWherePartHandler" ref="defaultRefWherePartHandler" />

         <!-- 是否自动增行 -->
        <property name="autoAddLine" value="false" />
         <!-- 是否合计 -->
        <property name="showTotalLine" value="true"/> 
        
        <!-- 表体行操作按钮注册，与表体右键菜单保持一致 -->
        <property name="bodyLineActions">
            <list>
                <!-- 提供了一组默认实现 -->
         <!--       <bean class="nc.ui.pubapp.uif2app.actions.BodyAddLineAction" />-->
                <bean class="nc.ui.cmp.apply.action.ApplyBodyAddLineAction" />
                <bean class="nc.ui.cmp.apply.action.ApplyBodyInsertLineAction" />
        <!--        <bean class="nc.ui.pubapp.uif2app.actions.BodyDelLineAction" />-->
        <bean class="nc.ui.cmp.apply.action.ApplyBodyDelLineAction" >
        
        </bean>  
                <bean class="nc.ui.cmp.apply.action.ApplyBodyCopyLineAction" />
                <bean class="nc.ui.cmp.apply.action.ApplyBodyPasteLineAction" > 
                	<property name="clearItems">
						  <list>
								<value>pk_apply_b</value>
								<value>ts</value>
						  </list>
					</property>
				</bean>
                <bean class="nc.ui.cmp.apply.action.ApplyBodyPasteToTailAction">
                	<property name="clearItems">
						  <list>
							     <value>pk_apply_b</value>
							     <value>ts</value>
						  </list>
					</property>
				</bean>  
                <bean class="nc.ui.pubapp.uif2app.actions.BodyLineEditAction" />          
            </list>
        </property>
        <!-- 卡片自定义项处理 -->
		<property name="userdefitemPreparator">
			<bean class="nc.ui.pubapp.uif2app.view.CompositeBillDataPrepare">
				<property name="billDataPrepares">
					<list>
						<ref bean="userdefitemPreparator" />
						<ref bean="marAsstPreparator" />
					</list>
				</property>
			</bean>
		</property>
    </bean>
    <!--新增单据设置默认值 -->
	<bean id="billDefVauleItf" class="nc.ui.cmp.apply.view.ApplyBillDefValue">
		<property name="editor" ref="billFormEditor" />
		<property name="cmpBillNodeKeyChangeListener" ref="CmpBillNodeKeyChangeListener" />
	</bean>
     <!-- 卡片自定义项配置 -->
	<bean name="userdefitemPreparator" class="nc.ui.uif2.editor.UserdefitemContainerPreparator">
		<property name="container" ref="userdefitemContainer" />
		<property name="params">
			<list>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="cmp.cmp_apply" />
					<property name="pos" value="0" />
					<property name="prefix" value="vdef" />
				</bean>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="cmp.cmp_apply_b" />
					<property name="pos" value="1" />
					<property name="prefix" value="vdef" />
				</bean>
			</list>
		</property>
	</bean>
	
	<!-- 自由辅助属性的配置 -->
	<bean id="marAsstPreparator" class="nc.ui.pubapp.uif2app.view.material.assistant.MarAsstPreparator">
		<property name="model" ref="manageAppModel" />
		<property name="container" ref="userdefitemContainer" />
		<property name="prefix" value="vfree" />
			</bean>
	
	<bean id="userdefitemContainer"
		class="nc.ui.uif2.userdefitem.UserDefItemContainer">
		<property name="context" ref="context" />
		<property name="params">
			<list> 
			  <bean class="nc.ui.uif2.userdefitem.QueryParam">
				<property name="mdfullname" value="cmp.cmp_apply" />
			  </bean>
			  <bean class="nc.ui.uif2.userdefitem.QueryParam">
				<property name="mdfullname" value="cmp.cmp_apply_b" />
			  </bean>	
			  <bean class="nc.ui.uif2.userdefitem.QueryParam">
			 	<property name="rulecode" value="materialassistant" />
			  </bean>
			</list>
		</property>
	</bean>
    
    
    <!--model事件监听器 -->
	<bean id="appEventHandlerMediator" class="nc.ui.pubapp.uif2app.model.AppEventHandlerMediator">
		<property name="model" ref="manageAppModel" />
		<property name="handlerMap">
			<map>
				<entry key="nc.ui.pubapp.uif2app.event.card.CardBodyRowChangedEvent">
					<list>
						<bean id="CardBodyRowChangedHandler"
							class="nc.ui.cmp.apply.handler.CardBodyRowChangedHandler">
							<property name="model" ref="manageAppModel" />
						</bean>
					</list>
				</entry>
    	</map>
		</property>
	</bean>
    
    
	<!-- 快速查询区域 -->
	<bean id="queryArea" class="nc.ui.pubapp.uif2app.tangramlayout.UEQueryAreaShell"
		init-method="initUI">
		<property name="queryAreaCreator" ref="queryAction" />
	</bean>
<!-- 查询信息栏 -->
	<bean id="queryInfo" class="nc.ui.uif2.tangramlayout.CardLayoutToolbarPanel">
		<property name="model" ref="manageAppModel" />
	</bean>
	
<!-- 卡片界面的工具栏和返回按钮 -->
	<bean id="cardInfoPnl" class="nc.ui.pubapp.uif2app.tangramlayout.UECardLayoutToolbarPanel">
		<property name="titleAction">
			<bean id="returnaction" class="nc.ui.pubapp.uif2app.actions.UEReturnAction">
				<property name="goComponent" ref="listView" />
				<property name="saveAction" ref="saveAction" />
				<property name="model" ref="manageAppModel" />
			</bean>
		</property>
		<property name="model" ref="manageAppModel" />
	</bean>

	<!-- 界面布局总装 -->
	<bean id="container" class="nc.ui.uif2.TangramContainer"
		init-method="initUI">
		<property name="model" ref="manageAppModel" />
		<property name="tangramLayoutRoot">
			<bean class="nc.ui.uif2.tangramlayout.node.TBNode">
				<property name="showMode" value="CardLayout" />
				<property name="tabs">
					<list>
						<bean class="nc.ui.uif2.tangramlayout.node.HSNode">
							<property name="left">
								<bean class="nc.ui.uif2.tangramlayout.node.CNode">
									<property name="component" ref="queryArea" />
								</bean>
							</property>
							<property name="right">
								<bean class="nc.ui.uif2.tangramlayout.node.VSNode">
									<property name="up">
										<bean class="nc.ui.uif2.tangramlayout.node.CNode">
											<property name="component" ref="queryInfo" />
										</bean>
									</property>
									<property name="down">
										<bean class="nc.ui.uif2.tangramlayout.node.CNode">
											<property name="name">
												<bean class="nc.ui.uif2.I18nFB">
													<property name="resDir" value="common"></property>
													<property name="resId" value="UC001-0000107"></property>
													<property name="defaultValue" value="list"></property>
												</bean>
											</property>
											<property name="component" ref="listView" />
										</bean>
									</property>
									<property name="dividerLocation" value="25f" />
								</bean>
							</property>
							<property name="dividerLocation" value="210f" />
						</bean>
						<bean class="nc.ui.uif2.tangramlayout.node.VSNode">
							<property name="up">
								<bean class="nc.ui.uif2.tangramlayout.node.CNode">
									<property name="component" ref="cardInfoPnl" />
								</bean>
							</property>
							<property name="down">
								<bean class="nc.ui.uif2.tangramlayout.node.CNode">
									<property name="name">
										<bean class="nc.ui.uif2.I18nFB">
											<property name="resDir" value="common"></property>
											<property name="resId" value="UC001-0000106"></property>
											<property name="defaultValue" value="card"></property>
										</bean>
									</property>
									<property name="component" ref="billFormEditor" />
								</bean>
							</property>
							<property name="dividerLocation" value="30f" />
						</bean>
					</list>
				</property>
			</bean>
		</property>
	</bean>

	<!-- 事件监听 -->
	<bean id="childrenPicky" class="nc.ui.pubapp.uif2app.event.ChildrenPicky">
		<property name="billform" ref="billFormEditor" />
		<property name="bodyVoClasses">
			<list>
				<value>nc.vo.cmp.apply.ApplyBVO</value>
			</list>
		</property>
	</bean>

	<bean id="eventMediator" class="nc.ui.pubapp.uif2app.model.AppEventHandlerMediator">
		<property name="model" ref="manageAppModel" />
		<!--wangchla new -->

		<property name="handlerMap">
			<map>
				<entry key="nc.ui.pubapp.uif2app.mediator.mutiltrans.NodekeyEvent">
					<list>
						<ref bean="CmpBillNodeKeyChangeListener" />
						<ref bean="addAction" />
					</list>
				</entry>
			</map>
		</property>

		<property name="handlerGroup">
			<list>
				<!-- 表体字段编辑前事件 -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyBeforeEditEvent" />
					<property name="picky" ref="childrenPicky" />
					<property name="handler">
						<bean class="nc.ui.cmp.apply.ace.handler.AceBodyBeforeEditHandler" />
					</property>
				</bean>

				<!-- 表体字段编辑后事件 -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyAfterEditEvent" />
					<property name="picky" ref="childrenPicky" />
					<property name="handler">
						<bean class="nc.ui.cmp.apply.ace.handler.AceBodyAfterEditHandler">
							<property name="model" ref="manageAppModel" />
						</bean>
					</property>
				</bean>

				<!-- 表头表尾字段编辑前事件 -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardHeadTailBeforeEditEvent" />
					<property name="handler">
						<bean class="nc.ui.cmp.apply.ace.handler.AceHeadTailBeforeEditHandler" />
					</property>
				</bean>

				<!-- 表头表尾字段编辑后事件 -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardHeadTailAfterEditEvent" />
					<property name="handler">
						<bean class="nc.ui.cmp.apply.ace.handler.AceHeadTailAfterEditHandler" >
							<property name="model" ref="manageAppModel" />
						</bean>

					</property>
				</bean>

				<!-- 新增事件 -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.billform.AddEvent" />
					<property name="handler">
						<bean class="nc.ui.cmp.apply.ace.handler.AceAddHandler" />
					</property>
				</bean>

				<!-- 组织改变事件 -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.OrgChangedEvent" />
					<property name="handler">
						<bean class="nc.ui.cmp.apply.ace.handler.AceOrgChangedHandler">
							<constructor-arg ref="billFormEditor" />
						</bean>
					</property>
				</bean>

				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.AppUiStateChangeEvent"></property>
					<property name="handler">
						<bean class="nc.ui.tmpub.event.TMAppUIStateChangeListener">
							<constructor-arg ref="billFormEditor" />
						</bean>
					</property>
				</bean>
			</list>
		</property>
	</bean>
	
	<!-- Actions  -->
	<bean id="toftpanelActionContributors" class="nc.ui.uif2.actions.ActionContributors">
		<property name="contributors">
			<list>
				<ref bean="actionsOfList" />
				<ref bean="actionsOfCard" />
			</list>
		</property>
	</bean>
	<!--节点变化事件监听器 -->
	<bean id="CmpBillNodeKeyChangeListener" class="nc.ui.cmp.bill.impl.CmpBillNodeKeyChangeListener">
		<property name="card" ref="billFormEditor" />
		<property name="model" ref="manageAppModel" />	
	</bean>
	<!-- 列表显示下的按钮 -->
	<bean id="actionsOfList" class="nc.ui.uif2.actions.StandAloneToftPanelActionContainer">
		<constructor-arg ref="listView" />
		<property name="model" ref="manageAppModel" />
		<property name="actions">
			<list>
				<ref bean="addMenu" />
				<ref bean="editAction" />
				<ref bean="deleteAction" />
				<ref bean="copyAction" />
				<ref bean="separatorAction" />
				<ref bean="queryAction" />
				<ref bean="refreshAction" />
				<ref bean="separatorAction" />
				<ref bean="transtypeAction" />
				<ref bean="commitMenuAction" />
				<ref bean="auditMenuAction" />
				<ref bean="separatorAction" />
				<ref bean="generateAction" />
				<ref bean="separatorAction" />
				<ref bean="imageFuncActionGroup" />
				<ref bean="otherFuncActionGroup" />
				<ref bean="separatorAction" />
				<ref bean="billQueryActionGroup" />
				<ref bean="separatorAction" />
				<!-- <ref bean="printMenuAction" /> -->
				<ref bean="list_printMenuAction" />
				<ref bean="separatorAction" />
			</list>
		</property>
	</bean>
	
	<!-- 卡片显示下的按钮 -->
	<bean id="actionsOfCard" class="nc.ui.uif2.actions.StandAloneToftPanelActionContainer">
		<constructor-arg ref="billFormEditor" />
		<property name="model" ref="manageAppModel" />
		<!-- 此处配置的Action浏览态始终可见 -->
		<property name="actions">
			<list>
				<ref bean="addMenu" />
				<ref bean="editAction" />
				<ref bean="deleteAction" />
				<ref bean="copyAction" />
				<ref bean="separatorAction" />
				<ref bean="queryAction" />
				<ref bean="cardRefreshAction" />
				<ref bean="separatorAction" />
				<ref bean="transtypeAction" />
				<ref bean="commitMenuAction" />
				<ref bean="auditMenuAction" />
				<ref bean="separatorAction" />
		 		<ref bean="generateAction" />
				<ref bean="separatorAction" />
				<ref bean="otherFuncActionGroup" />
				<ref bean="imageFuncActionGroup" />
				<ref bean="separatorAction" />
				<ref bean="billQueryActionGroup" />
				<ref bean="separatorAction" />
				<ref bean="card_printMenuAction" />
				<ref bean="separatorAction" />
			</list>
		</property>

		<!-- 此处配置的Action编辑态始终可见 -->
		<property name="editActions">
			<list>
				<ref bean="saveAction" />
				<ref bean="applySqaddAction" />
				<!-- <ref bean="saveCommitAction" /> -->  <!-- gwj 170312隐藏保存提交按钮 -->
				<ref bean="separatorAction" />
				<ref bean="cancelAction" />
			</list>
		</property>
	</bean>
	
	<!-- 分隔按钮 -->
    <bean id="separatorAction" class="nc.funcnode.ui.action.SeparatorAction" /> 
    <!-- 显示列表的拦截器 -->
	<bean id="showListInterceptor"
		class="nc.ui.cmp.apply.action.ShowUpComponentInterceptor">
		<property name="showUpComponent" ref="listView" />
	</bean>
	<!-- 显示卡片的拦截器 -->
	<bean id="showCardInterceptor"
		class="nc.ui.cmp.apply.action.ShowUpComponentInterceptor">
		<property name="showUpComponent" ref="billFormEditor" />
	</bean>
	
	
		<!-- 新增菜单 -->
	<bean id="addMenu" class="nc.ui.pubapp.uif2app.actions.AddMenuAction">
		<!-- 当前单据的单据类型 -->
		<property name="billType" value="36D1" />
		<!-- 当前单据的所有上游单据的一个全集 -->
		<property name="actions">
			<list>
				<ref bean="addAction" />
				<ref bean="addFromU1Action" />
			</list>
		</property>
		<property name="model" ref="manageAppModel" />
	</bean>
	
	
		<!-- 拉单新增 -->
	<bean id="addFromU1Action" class="nc.ui.cmp.apply.action.ApplyAddFrom36OVAction">
		<!-- 来源单据类型编码 -->
		<property name="sourceBillType" value="36OV" />
		<!-- 来源单据类型名称 -->
		<property name="sourceBillName">
			<bean class="nc.ui.uif2.I18nFB">
				<property name="resDir" value="3607apply_add_0"></property>
				<property name="resId" value="03607apply_add-0161"></property>
				<property name="defaultValue" value="ReferenceUpBillAction"></property>
			</bean>
		</property>
		<property name="selfBillType" value="36D1" />
		<property name="transferViewProcessor" ref="transferViewProcessor"/>
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<!--<property name="editor" ref="billFormEditor" />
		<property name="interceptor" ref="showCardInterceptor" />-->
		<!-- 是否流程单据，如果是流程单据，可以删除 --> 
		<property name="flowBillType" value="false" />
		<!-- 用于精度处理 -->
		 <property name="listDigitListener" ref="listDigitListener"></property>
	</bean>
	<bean id="listDigitListener"  class="nc.ui.cmp.apply.query.ApplyRefListPanelDigitListener">
	 	<property name="srcDestItemCollection" ref="cardSrcDestCollection"></property>
	</bean>
	<bean id="addAction" class="nc.ui.cmp.apply.action.ApplyAddAction"> 
	<!--<bean id="addAction" class="nc.ui.pubapp.uif2app.actions.AddAction">-->
        <property name="model" ref="manageAppModel" />
        <property name="interceptor" ref="showCardInterceptor" />
        <property name="billform" ref="billFormEditor" />
    </bean>
    
	<bean id="saveCommitAction"
		class="nc.ui.cmp.apply.action.ApplySaveAndCommitScriptAction">
		<constructor-arg ref="saveAction" />
		<constructor-arg ref="commitAction" />
		<property name="model" ref="manageAppModel" />
		 <property name="editor" ref="billFormEditor" />
	</bean>
	
	<bean id="applySqaddAction" class="nc.ui.cmp.apply.action.ApplyPFNewSaveAction">
		<constructor-arg>
			<value>SAVENEW</value>
		</constructor-arg>
		<property name="addAction" ref="addAction" />
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<!--<property name="validationServices">
			<list>
				<ref bean="savevalidator" />
			</list>
		</property>
		-->
	</bean>
	
	<bean id="editAction" class="nc.ui.cmp.apply.action.Cmp_applyEditAction">
        <property name="model" ref="manageAppModel" />
        <property name="powercheck" value="true" />
        <property name="billType" value="36D1" />
        <property name="billCodeName" value="vbillno" />
        <property name="editor" ref="billFormEditor" />
       
        <property name="interceptor" ref="showCardInterceptor" />
        
         <property name="fieldNames">
			<list>
				<value>pk_group</value>
				<value>vbillstatus</value>
				<value>pk_currtype</value>
				<value>applydate</value>
				<value>pk_applyperiod</value>
				<value>pk_project</value>
			</list>
		</property>

    </bean>

    
    <bean id="deleteAction" class="nc.ui.cmp.apply.action.Cmp_applyDeleteAction">
    		    <property name="model" ref="manageAppModel" />
    		    <property name="editor" ref="billFormEditor" />
    		    <property name="actionName" value="DELETE" />
    		    <property name="powercheck" value="true" />
        <property name="billType" value="36D1" />
        <property name="billCodeName" value="vbillno" />
    </bean>
    
    <bean id="saveAction" class="nc.ui.cmp.apply.action.Cmp_applySaveAction">
        <property name="model" ref="manageAppModel" />
        <property name="editor" ref="billFormEditor" />
        <property name="actionName" value="SAVEBASE" />
        <property name="billType" value="36D1" />
		<property name="validationService" ref="validateService" />
    </bean>
    

    <!-- 保存组合校验 -->
    <bean id="validateService" class="nc.ui.pubapp.uif2app.validation.CompositeValidation">
        <property name="validators">
	        <list>
	             <bean class="nc.ui.pubapp.uif2app.validation.TemplateNotNullValidation">
	                  <property name="billForm" ref="billFormEditor" />
	             </bean>	
	        </list>
        </property>
    </bean>	
    
    <bean id="cancelAction" class="nc.ui.cmp.apply.action.ApplyCancelAction">
        <property name="model" ref="manageAppModel" />
           <!--<property name="manager" ref="modelDataManager" />
        <property name="cardRefreshAction" ref="cardRefreshAction" />-->
    </bean>
    <!-- 复制
	<bean id="copyAction" class="nc.ui.cmp.apply.action.ApplyCopyAction">
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<property name="applyCopyActionProcessor">
			<bean
				class="nc.ui.cmp.apply.action.ApplyCopyActionnProcessor"></bean>
		</property>
	</bean> -->
	
		
		
		<!-- 复制 -->
	<bean id="copyAction" class="nc.ui.cmp.apply.action.ApplyCopyAction">
		<property name="model" ref="manageAppModel" />
		<property name="interceptor" ref="showCardInterceptor" />
		<property name="editor" ref="billFormEditor" />
		<property name="copyActionProcessor">
			<bean class="nc.ui.cmp.apply.action.CopyActionProcessor"></bean>
		</property>
	</bean>
	
	
	<bean id="qryCondInitializer"
		class="nc.ui.cmp.apply.query.Cmp_applyQueryConditionInitializer">
		<property name="model" ref="manageAppModel"/>
	</bean>
	<!-- 查询按钮 -->
	<bean id="queryAction" class="nc.ui.pubapp.uif2app.query2.action.DefaultQueryAction">
		<property name="model" ref="manageAppModel" />
		<property name="dataManager" ref="modelDataManager" />
		<property name="qryCondDLGInitializer" ref="qryCondInitializer" />
		<property name="showUpComponent" ref="listView" />
		<property name="templateContainer" ref="queryTemplateContainer" />
	</bean>

	<!-- 列表下刷新 -->
	<bean id="refreshAction" class="nc.ui.cmp.apply.action.CmpRefreshSchemeAction">
		<property name="dataManager" ref="modelDataManager" />
		<property name="model" ref="manageAppModel" />
	</bean>

	<!-- 卡片下刷新 -->
	<bean id="cardRefreshAction" class="nc.ui.pubapp.uif2app.actions.RefreshSingleAction">
		<property name="model" ref="manageAppModel" />
		
	<!-- 交易类型 -->
	</bean>
		<bean id="transtypeAction" class=" nc.ui.cmp.apply.action.ApplyPayTransTypeAction">
		<property name="model" ref="manageAppModel" />
		<property name="transTypeRefModel" ref="transTypeRefModel" />
		<property name="wherepart" value=" parentbilltype = '36D1'" />
	</bean>
	
	<bean id="transTypeRefModel" class="nc.ui.cmp.ref.FiBillTypeRefModel" />
	
    <!-- 提交 -->
    <bean id="commitAction" class="nc.ui.cmp.apply.action.ApplyCommitAction">
        <property name="model" ref="manageAppModel" />
        <property name="editor" ref="billFormEditor" />
        <property name="billType" value="36D1" />
        <property name="actionName" value="SAVE" />
        <property name="filledUpInFlow" value="true" />
    </bean>
    <!-- 收回 -->
    <bean id="unCommitAction" class="nc.ui.cmp.apply.action.ApplyUnCommitAction">
     	<property name="model" ref="manageAppModel" />
        <property name="editor" ref="billFormEditor" />
        <property name="billType" value="36D1" />
        <property name="actionName" value="UNSAVEBILL" />
        <property name="filledUpInFlow" value="true" />
    </bean>
    <!-- 提交按钮组 -->
    <bean id="commitMenuAction" class="nc.funcnode.ui.action.GroupAction">
        <property name="code" value="commitMenuAction" />
        <property name="name">
			          <bean class="nc.ui.uif2.I18nFB">
			  	          <property name="resDir" value="common"></property>
				            <property name="resId" value="2UC000-001107"></property>
				            <property name="defaultValue" value="commit"></property>
			          </bean>
		        </property>
        <property name="actions">
	        <list>
		            <ref bean="commitAction" />
		            <ref bean="unCommitAction" />
	        </list>
        </property>
    </bean>
    
    <bean id="approvepowervalidservice" class="nc.ui.pubapp.pub.power.PowerValidateService">
			        <property name="actionCode" value="approve" />
		        <property name="billCodeFiledName" value="vbillno" />
		        <property name="permissionCode" value="36D1" />
	    </bean>
	    
	    <bean id="unapprovepowervalidservice" class="nc.ui.pubapp.pub.power.PowerValidateService">
		        <property name="actionCode" value="unapprove" />
		        <property name="billCodeFiledName" value="vbillno" />
		        <property name="permissionCode" value="36D1" />
	    </bean>
    
    <!-- 审批 -->
    <bean id="approveAction" class="nc.ui.cmp.apply.action.ApplyApproveAction">
     	<property name="model" ref="manageAppModel" />
        <property name="editor" ref="billFormEditor" />
        <property name="billType" value="36D1" />
        <property name="actionName" value="APPROVE" />
        <property name="validationService" ref="approvepowervalidservice" />
         <property name="filledUpInFlow" value="true" />
    </bean>

    <!-- 弃审 -->
   	<bean id="unApproveAction"
        class="nc.ui.cmp.apply.action.ApplyUnApproveAction">
        <property name="model" ref="manageAppModel" />
        <property name="editor" ref="billFormEditor" />
        <property name="billType" value="36D1" />
        <property name="actionName" value="UNAPPROVE" />
        <property name="validationService" ref="unapprovepowervalidservice" />
         <property name="filledUpInFlow" value="true" />
    </bean>
    <!-- 审批按钮组 -->
    <bean id="auditMenuAction" class="nc.funcnode.ui.action.GroupAction">
        <property name="code" value="auditMenuAction" />
        <property name="name">
			          <bean class="nc.ui.uif2.I18nFB">
			  	          <property name="resDir" value="common"></property>
				            <property name="resId" value="2UC000-001109"></property>
				            <property name="defaultValue" value="approve"></property>
			          </bean>
		        </property>
        <property name="actions">
	        <list>
		             <ref bean="approveAction" />
           				<ref bean="unApproveAction" />
           				<ref bean="queryAuditFlowAction" />
	        </list>
        </property>
    </bean>
	    <!-- 生成付款单group -->
	<bean id="billActionGroup" class="nc.funcnode.ui.action.GroupAction">
		<property name="code" value="paybill" />
		
		<property name="name">
			<bean class="nc.ui.uif2.I18nFB ">
				<property name="resDir" value="3607apply_add_0" />
				<property name="defaultValue" value="generate" />
				<property name="resId" value="03607apply_add-0164" />
			</bean>
		</property>
		<property name="actions">
			<list>
				<ref bean="generateAction" />
				<ref bean="separatorAction" />
				<!--<ref bean="ungenerateAction" />
			--></list>
		</property>
	</bean>

    <!-- 生成 -->
    <bean id="generateAction" class="nc.ui.cmp.apply.action.ApplyToFiBillAction">
    	<constructor-arg>
			<value>GENERATE</value>
		</constructor-arg>
		<property name="model" ref="manageAppModel" />
		<!--<property name="manager" ref="modelDataManager" />-->
			<property name="cardRefreshAction" ref="cardRefreshAction" />
		<property name="refreshAction" ref="refreshAction" />
		<property name="editor" ref="billFormEditor" />
		<property name="isValidateWithRtn" value="true" />
		<property name="isBatch" value="true" />
	</bean>
	
		
	    <!-- 取消生成 -->
    <bean id="ungenerateAction" class="nc.ui.cmp.apply.action.ApplyToFiBillCancelAction">			
    		<constructor-arg>	
			<value>UNGENERATE</value>
			</constructor-arg>
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<property name="isValidateWithRtn" value="true" />
		<property name="isBatch" value="true" />
	</bean>		

	
    <!-- 打印 -->
	<bean id="printAction" class="nc.ui.pubapp.uif2app.actions.MetaDataBasedPrintAction">
		<property name="preview" value="false" />
		<property name="model" ref="manageAppModel" />
		<property name="nodeKey" value="ot" />	
	</bean>
	
	<!-- 预览 -->
	<bean id="previewAction" class="nc.ui.pubapp.uif2app.actions.MetaDataBasedPrintAction">
		<property name="preview" value="true" />
		<property name="model" ref="manageAppModel" />
		<property name="nodeKey" value="ot" />	
	</bean>
	
	<!-- 输出 -->
	<bean id="outputAction" class="nc.ui.pubapp.uif2app.actions.OutputAction">
		<property name="model" ref="manageAppModel" />
		<property name="parent" ref="billFormEditor" />
		<property name="nodeKey" value="ot" />	
	</bean>
	
	<!-- 附件管理 -->
	<bean id="fileDocManageAction" class="nc.ui.pubapp.uif2app.actions.FileDocManageAction">
		<property name="model" ref="manageAppModel" />
	</bean>
	
		<!--影像-->
	<bean id="imageFuncActionGroup" class="nc.funcnode.ui.action.MenuAction">
		<property name="code" value="imageFunc" />
		<property name="name">
			<bean class="nc.ui.uif2.I18nFB">
				<property name="resDir" value="3607mng_0"></property>
				<property name="defaultValue" value="影像"></property>
				<property name="resId" value="03607mng-0446"></property>
			</bean>
		</property>
		<property name="actions">
			<list>
				<ref bean="imageShowAction" />
				<!--<ref bean="imageScanAction" />-->
			</list>
		</property>
	</bean>
	<!-- 影像查看 -->
	<bean id="imageShowAction" class="nc.imag.scan.action.BaseImageShowAction"> 
		<property name="model" ref="manageAppModel" /> 
		<property name="pk_billtype" value="0001Z6000000000036D1" />
		<property name="btnName">
			<bean class="nc.ui.uif2.I18nFB">
				<property name="resDir" value="3607mng_0"></property>
				<property name="defaultValue" value="影像查看"></property>
				<property name="resId" value="03607mng-0447"></property>
			</bean>
		</property>
		
	</bean> 
	<!-- 影像扫描 --> 
	<bean id="imageScanAction" class="nc.imag.scan.action.BaseImageScanAction"> 
		<property name="model" ref="manageAppModel" /> 
		<property name="pk_billtype" value="0001Z6000000000036D1" /> 
		<!-- 0 不控制，1转岗扫描，2制单人扫描-->
		<property name="checkscanway" value="nc.imag.scan.service.CheckScanWay" /> 
	</bean>
	
	<!-- 辅助功能 -->
	<bean id="otherFuncActionGroup" class="nc.funcnode.ui.action.MenuAction">
		<property name="code" value="otherFunc" />
		<property name="name">
			<bean class="nc.ui.uif2.I18nFB ">
				<property name="resDir" value="3607apply_add_0" />
				<property name="defaultValue" value="help" />
				<property name="resId" value="03607apply_add-0163" />
			</bean>
		</property>
		<property name="actions">
			<list>
				<!-- 不用，去掉 <ref bean="frozenAction" /> <ref bean="disFrozenAction" /> 
					<ref bean="separatorActon" /> -->
				<ref bean="fileDocManageAction" />
			</list>
		</property>
	</bean>
	<!-- 打印按钮组 -->
	<bean id="printMenuAction" class="nc.funcnode.ui.action.GroupAction">
		<property name="code" value="printMenuAction" />
<property name="name">
			<bean class="nc.ui.uif2.I18nFB">
			  	<property name="resDir" value="common"></property>
				<property name="resId" value="UC001-0000007"></property>
				<property name="defaultValue" value="print"></property>
			</bean>
		</property>
		<property name="actions">
			<list>
				<ref bean="printAction" />
				<ref bean="previewAction" />
				<ref bean="outputAction" />
			</list>
		</property>
	</bean>
	 	<!-- 联查 -->
	<bean id="billQueryActionGroup" class="nc.funcnode.ui.action.MenuAction">
		<property name="code" value="querybill" />
		<property name="name">
			<bean class="nc.ui.uif2.I18nFB ">
				<property name="resDir" value="3607apply_add_0" />
				<property name="defaultValue" value="linkQuery" />
				<property name="resId" value="03607apply_add-0162" />
			</bean>
		</property>
		<property name="actions">
			<list>
				 <!--<ref bean="separatorAction" />-->
				<ref bean="hxBzQueryAction" />
				<ref bean="separatorAction" />
				 <!--<ref bean="linkQueryUpBillAction" />-->
				<ref bean="linkQueryAction" />
				<ref bean="linkQueryBudgetAction" />
			</list>
		</property>
	</bean>    
	
	<bean id="hxBzQueryAction" class="nc.ui.cmp.apply.action.HxBzQueryAction">
		<property name="model" ref="manageAppModel" />
	</bean>
	
	<!-- 联查单据 -->
	<bean id="linkQueryAction" class="nc.ui.pubapp.uif2app.actions.LinkQueryAction">
		<property name="model" ref="manageAppModel" />
		<property name="billType" value="36D1" />
	</bean>
	<!-- 联查上游单据 -->
	<bean id="linkQueryUpBillAction" class="nc.ui.cmp.apply.action.ApplyLinkQueryUpBillAction">
		<property name="model" ref="manageAppModel" />
		<property name="edit" ref="billFormEditor" />
		<property name="listView" ref="listView" />
	</bean>
	<!-- 联查预算 -->
	<bean id="linkQueryBudgetAction" class="nc.ui.cmp.apply.action.ApplyLinkQueryBudgetAction">
		<property name="model" ref="manageAppModel" />
	</bean>
	

	<!-- 查看审批流 -->
	<bean id="queryAuditFlowAction" class="nc.ui.pubapp.uif2app.actions.pflow.PFApproveStatusInfoAction">
	<property name="billType" value="36D1" />
		<property name="model" ref="manageAppModel" />	
	</bean>
	
	<!-- 懒加载 -->
    <bean id="billLazilyLoader" class="nc.ui.pubapp.uif2app.lazilyload.DefaultBillLazilyLoader" />
    <bean id="lasilyLodadMediator" class="nc.ui.pubapp.uif2app.lazilyload.LazilyLoadManager">
	        <property name="model" ref="manageAppModel" />
	        <property name="loader" ref="billLazilyLoader" />
	        <property name="lazilyLoadSupporter">
	           <list>
	              <bean class="nc.ui.pubapp.uif2app.lazilyload.CardPanelLazilyLoad" >
	                  <property name="billform" ref="billFormEditor" />
	              </bean>
	              <bean class="nc.ui.pubapp.uif2app.lazilyload.ListPanelLazilyLoad" >
	                  <property name="listView" ref="listView" />
	              </bean>
	           </list>
	       </property>
    </bean>
    
    <!-- model与界面的表体排序同步组件 -->
   	<bean id="billBodySortMediator" class="nc.ui.pubapp.uif2app.model.BillBodySortMediator">
        <constructor-arg ref="manageAppModel" />
        <constructor-arg ref="billFormEditor" />
        <constructor-arg ref="listView" />
    </bean>
    
    <!-- 打开节点监听 -->
    <!-- wangchla new -->
<!--
    <bean id="InitDataListener" class="nc.ui.cmp.apply.model.ApplyFuncNodeInitDataListener">
		<property name="actionContributors" ref="toftpanelActionContributors" />    
--> 	    
	<bean id="InitDataListener" class="nc.ui.cmp.apply.listener.CMPApplyFuncNodeInitDataListener">
		  <property name="listView" ref="listView"/>
		   <property name="editor" ref="billFormEditor"/>
		    <property name="paginationModel" ref="paginationModel"/>
        <property name="model" ref="manageAppModel"/>
        <property name="context" ref="context"></property>
        <!-- VO的类名 -->
        <property name="voClassName" value="nc.vo.cmp.apply.AggApplyVO"/>
        <!-- 打开节点节点后要显示的界面 -->
        <property name="autoShowUpComponent" ref="billFormEditor"/>
        		<property name="processorMap">
			<map>
				<entry>
					<key>
						<value>10</value>
					</key>
					<bean class="nc.ui.cmp.apply.billref.processor.InitDataProcessorFor21">
						<property name="transferProcessor" ref="transferViewProcessor" />
						 <property name="listDigitListener" ref="listDigitListener"></property>
					</bean>
				</entry>
				
				<entry>
					<key>
						<value>12</value>
					</key>
					<bean class="nc.ui.cmp.apply.billref.processor.InitDataProcessorForZ2">
						<property name="transferProcessor" ref="transferViewProcessor" />
						 <property name="listDigitListener" ref="listDigitListener"></property>
					</bean>
				</entry>
			</map>
		</property>
		 <!-- 快捷方式 查询方案链接需要，默认查询方案pub_systemplate里面的nodekey要为空才行 -->
		<property name="queryAction" ref="queryAction" />
    </bean>
    
    <!-- 转单后公共代码处理 -->
	<bean id="transferViewProcessor" class="nc.ui.pubapp.billref.dest.TransferViewProcessor">
		<property name="list" ref="listView" />
		<property name="actionContainer" ref="actionsOfList" />
 		 <property name="commitAction" ref="commitAction" />

		<property name="cardActionContainer" ref="actionsOfCard" />
		<property name="saveAction" ref="saveAction" />
		<property name="cancelAction" ref="cancelAction" />

		<property name="billForm" ref="billFormEditor" />
		<!-- 快速查询区 
		<property name="queryAreaShell" ref="queryArea" />-->
		<!-- 查询信息工具栏
		<property name="queryInfoToolbarPanel" ref="queryInfo" /> -->
		
		<property name="transferLogic">
   			<bean class="nc.ui.cmp.apply.view.ApplyTransferBillDataLogic">
   		 		<property name="billForm" ref="billFormEditor" />
   			</bean>
 		 </property>
		
	</bean>

    <!-- 节点关闭的校验 -->
    <bean id="ClosingListener" class="nc.ui.pubapp.common.validateservice.ClosingCheck" >
        <property name="model" ref="manageAppModel"/>
        <property name="saveAction" ref="saveAction"/>
    </bean>
    
    <!-- 自动修正卡片界面的分数显示控件(换算率) -->
    <bean id="fractionFixMediator" class="nc.ui.pubapp.uif2app.view.FractionFixMediator" init-method="initUI">
        <constructor-arg ref="billFormEditor"/>
    </bean>
    <!-- 双击列表行后显示卡片 -->
    <bean id="mouseClickShowPanelMediator" class="nc.ui.pubapp.uif2app.view.MouseClickShowPanelMediator">
        <property name="listView" ref="listView" />
        <property name="showUpComponent" ref="billFormEditor" />
        <property name="hyperLinkColumn" value="vbillno" />
    </bean>
    <!-- 单据号 -->
    <bean id="billCodeMediator" class="nc.ui.pubapp.bill.BillCodeMediator" init-method="initUI">
        <property name="billForm" ref="billFormEditor"></property>
        <property name="billCodeKey" value="vbillno"></property>
        <property name="billType" value="36D1"></property>
    </bean>
    <!-- 行号自动处理 -->
    <bean id="rowNoMediator" class="nc.ui.pubapp.uif2app.view.RowNoMediator">
        <property name="model" ref="manageAppModel" />
        <property name="editor" ref="billFormEditor" />
    </bean>
    
   	<bean id="remoteCallCombinatorCaller" class="nc.ui.uif2.editor.UIF2RemoteCallCombinatorCaller">
		<property name="remoteCallers">
			<list>
				<ref bean="queryTemplateContainer" />
				<ref bean="templateContainer" />
				<ref bean="userdefitemContainer" />
			</list>
		</property>
	</bean>
	


	
	
	
	

    	<!-- filter -->
	<bean id="defaultRefWherePartHandler" class="nc.ui.tmpub.filter.DefaultRefWherePartHandler">
		<property name="uiAccessor">
			<bean class="nc.ui.tmpub.filter.DefaultUIAccessor">
				<property name="billCardPanelEditor" ref="billFormEditor" />
			</bean>
		</property>
		<property name="filterList">
<list>
				<bean class="nc.ui.cmp.apply.filter.TranstypeFilter">
					<property name="srcKey" value="pk_billtypeid"></property>
					<property name="destKey" value="pk_billtypeid"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.filter.PayBankaccFilter">
					<property name="srcKey" value="paytype"></property>
					<property name="destKey" value="pk_bankacc_p"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.filter.PayBankaccFilter">
					<property name="srcKey" value="isputdown"></property>
					<property name="destKey" value="pk_bankacc_p"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.reffilter.BankaccRefbyCurrFilter">
					<property name="srcKey" value="pk_currtype"></property>
					<property name="destKey" value="pk_bankacc_p"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.reffilter.BankaccRefbyCurrFilter">
					<property name="srcKey" value="pk_currtype"></property>
					<property name="destKey" value="pk_bankacc_r"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.reffilter.BankaccRefbyCurrFilter">
					<property name="srcKey" value="pk_currtype"></property>
					<property name="destKey" value="pk_bankacc_pd"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.reffilter.SupplierRefFrozenFilter">
					<property name="srcKey" value="pk_supplier"></property>
					<property name="destKey" value="pk_supplier"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.reffilter.SelfSupplierRefFilter">
					<property name="srcKey" value="pk_org"></property>
					<property name="destKey" value="pk_supplier"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.filter.BusinesstypeFilter">
					<property name="srcKey" value="pk_busitype"></property>
					<property name="destKey" value="pk_busitype"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<bean class="nc.ui.cmp.apply.filter.BusinesstypeFilter">
					<property name="srcKey" value="pk_billtypeid"></property>
					<property name="destKey" value="pk_busitype"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<!-- 资金计划项目过滤掉收入类型的 -->
				<bean class="nc.ui.cmp.apply.filter.FundplanFilter">
					<property name="srcKey" value="pk_planitem"></property>
					<property name="destKey" value="pk_planitem"></property>
					<property name="destPos" value="0"></property>
				</bean>

				<!-- TMPUB 过滤 -->
				<!-- 过滤掉客商银行账户参照的内部账户 -->
				<bean class="nc.ui.cmp.apply.reffilter.CustBankNoInnerAccFilter">
					<property name="srcKey" value="pk_supplier"></property>
					<property name="destKey" value="pk_bankacc_r"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<!-- 过滤掉内部账户生成的银行账户子户 -->
				<bean class="nc.ui.tmpub.filter.BanksubaccNoInnerAccFilter">
					<property name="srcKey" value="pk_bankacc_pd"></property>
					<property name="destKey" value="pk_bankacc_pd"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<!-- 过滤掉全部冻结的银行账户子户 -->
				<bean class="nc.ui.tmpub.filter.BanksubaccNoFrozenFilter">
					<property name="srcKey" value="pk_bankacc_p"></property>
					<property name="destKey" value="pk_bankacc_p"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<!-- 不能用这个，因为客商银行账户不提供accstate这个字段 <bean class="nc.ui.tmpub.filter.BanksubaccNoFrozenFilter"> 
					<property name="srcKey" value="pk_bankacc_r"></property> <property name="destKey" 
					value="pk_bankacc_r"></property> <property name="destPos" value="0"></property> 
					</bean> -->
				<bean class="nc.ui.tmpub.filter.BanksubaccNoFrozenFilter">
					<property name="srcKey" value="pk_bankacc_pd"></property>
					<property name="destKey" value="pk_bankacc_pd"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<!-- 过滤掉已销户的银行账户子户 -->
				<bean class="nc.ui.tmpub.filter.BanksubaccNoDestroyFilter">
					<property name="srcKey" value="pk_bankacc_p"></property>
					<property name="destKey" value="pk_bankacc_p"></property>
					<property name="destPos" value="0"></property>
				</bean>
				<!-- 不能用这个，因为客商银行账户不提供accstate这个字段 <bean class="nc.ui.tmpub.filter.BanksubaccNoDestroyFilter"> 
					<property name="srcKey" value="pk_bankacc_r"></property> <property name="destKey" 
					value="pk_bankacc_r"></property> <property name="destPos" value="0"></property> 
					</bean> -->
				<bean class="nc.ui.tmpub.filter.BanksubaccNoDestroyFilter">
					<property name="srcKey" value="pk_bankacc_pd"></property>
					<property name="destKey" value="pk_bankacc_pd"></property>
					<property name="destPos" value="0"></property>
				</bean>
				
				<!-- <bean class="nc.ui.ps.reffilter.BankaccRefbyOrgFilter"> <property 
					name="srcKey" value="pk_org"></property> <property name="destKey" value="pk_bankacc_p"></property> 
					<property name="destPos" value="0"></property> </bean> <bean class="nc.ui.ps.reffilter.BankaccRefbyOrgFilter"> 
					<property name="srcKey" value="pk_org"></property> <property name="destKey" 
					value="pk_bankacc_pd"></property> <property name="destPos" value="0"></property> 
					</bean> -->
			</list>
		</property>
	</bean>
</beans>
